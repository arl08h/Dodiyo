{"version":3,"sources":["javascripts/four.js"],"names":["canvas","screen","gameSize","game","invaderCanvas","invaderMultiplier","invaderSize","initialOffsetInvader","invaderAttackRate","invaderSpeed","invaderSpawnDelay","i","kills","spawnDelayCounter","invaderDownTimer","blocks","Game","level","lost","player","Player","invaders","invaderShots","undefined","setInterval","length","move","prototype","update","createInvaders","projectile","forEach","invader","collides","destroy","active","filter","draw","fillStyle","fillRect","width","height","font","textAlign","fillText","clearRect","beginPath","fill","invadersBelow","b","Math","abs","coordinates","x","y","Invader","size","patrolX","speedX","random","Projectile","push","drawImage","shooterHeat","keyboarder","KeyController","isDown","KEYS","LEFT","RIGHT","Space","rect","velocity","keyCode","keyState","counter","window","addEventListener","e","preventDefault","a","getPixelRow","rowRaw","textRow","placer","row","floor","tmpContent","j","k","invaderAsset","Image","onload","document","createElement","getContext","getElementById","initGameStart","loop","src","innerWidth","requestAnimationFrame"],"mappings":"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","file":"four.01e47e4c.map","sourceRoot":"..","sourcesContent":["\n;(function() {\n  \"use strict\";\n\n  // General\n  var canvas,\n    screen,\n    gameSize,\n    game;\n\n  // Assets\n  var invaderCanvas,\n    invaderMultiplier,\n    invaderSize = 20,\n    initialOffsetInvader,\n    invaderAttackRate,\n    invaderSpeed,\n    invaderSpawnDelay = 250;\n\n  // Counter\n  var i = 0,\n    kills = 0,\n    spawnDelayCounter = invaderSpawnDelay;\n\n  var invaderDownTimer;\n\n  // Text\n  var blocks = [\n    [3, 4, 8, 9, 10, 15, 16],\n    [2, 4, 7, 11, 14, 16],\n    [1, 4, 7, 11, 13, 16],\n    [1, 2, 3, 4, 5, 7, 11, 13, 14, 15, 16, 17],\n    [4, 7, 11, 16],\n    [4, 8, 9, 10, 16]\n  ];\n\n  // Game Controller\n  // ---------------\n  var Game = function() {\n\n    this.level = -1;\n    this.lost = false;\n\n    this.player = new Player();\n    this.invaders = [];\n    this.invaderShots = [];\n\n    if (invaderDownTimer === undefined) {\n      invaderDownTimer = setInterval(function() {\n        for (i = 0; i < game.invaders.length; i++) game.invaders[i].move();\n      }, 1000 - (this.level * 1.8));\n\n    };\n  }\n\n  Game.prototype = {\n    update: function() {\n\n      // Next level\n      if (game.invaders.length === 0) {\n\n        spawnDelayCounter += 1;\n        if (spawnDelayCounter < invaderSpawnDelay) return;\n\n        this.level += 1;\n\n        invaderAttackRate -= 0.002;\n        invaderSpeed += 10;\n\n        game.invaders = createInvaders();\n\n        spawnDelayCounter = 0;\n      }\n\n      if (!this.lost) {\n\n        // Collision\n        game.player.projectile.forEach(function(projectile) {\n          game.invaders.forEach(function(invader) {\n            if (collides(projectile, invader)) {\n              invader.destroy();\n              projectile.active = false;\n            }\n          });\n        });\n\n        this.invaderShots.forEach(function(invaderShots) {\n          if (collides(invaderShots, game.player)) {\n            game.player.destroy();\n          }\n        });\n\n        for (i = 0; i < game.invaders.length; i++) game.invaders[i].update();\n\n      }\n\n      // Don't stop player & projectiles.. they look nice\n      game.player.update();\n      for (i = 0; i < game.invaderShots.length; i++) game.invaderShots[i].update();\n\n      this.invaders = game.invaders.filter(function(invader) {\n        return invader.active;\n      });\n\n    },\n\n    draw: function() {\n\n      if (this.lost) {\n        screen.fillStyle = \"rgba(0, 0, 0, 0.03)\";\n        screen.fillRect(0, 0, gameSize.width, gameSize.height);\n\n        screen.font = \"55px Lucida Console\";\n        screen.textAlign = \"center\";\n        screen.fillStyle = \"white\";\n        screen.fillText(\"You lost\", gameSize.width / 2, gameSize.height / 2);\n        screen.font = \"20px Lucida Console\";\n        screen.fillText(\"Points: \" + kills, gameSize.width / 2, gameSize.height / 2 + 30);\n\n      } else {\n        screen.clearRect(0, 0, gameSize.width, gameSize.height);\n\n        screen.font = \"10px Lucida Console\";\n        screen.textAlign = \"right\";\n        screen.fillText(\"Points: \" + kills, gameSize.width, gameSize.height - 12);\n      }\n\n      screen.beginPath();\n\n      var i;\n      this.player.draw();\n      if (!this.lost)\n        for (i = 0; i < this.invaders.length; i++) this.invaders[i].draw();\n      for (i = 0; i < this.invaderShots.length; i++) this.invaderShots[i].draw();\n\n      screen.fill();\n\n    },\n\n    invadersBelow: function(invader) {\n      return this.invaders.filter(function(b) {\n        return Math.abs(invader.coordinates.x - b.coordinates.x) === 0 &&\n          b.coordinates.y > invader.coordinates.y;\n      }).length > 0;\n    }\n\n  };\n\n  // Invaders\n  // --------\n  var Invader = function(coordinates) {\n    this.active = true;\n    this.coordinates = coordinates;\n    this.size = {\n      width: invaderSize,\n      height: invaderSize\n    };\n\n    this.patrolX = 0;\n    this.speedX = invaderSpeed;\n\n  };\n\n  Invader.prototype = {\n    update: function() {\n\n      if (Math.random() > invaderAttackRate && !game.invadersBelow(this)) {\n        var projectile = new Projectile({\n          x: this.coordinates.x + this.size.width / 2,\n          y: this.coordinates.y + this.size.height - 5\n        }, {\n          x: 0,\n          y: 2\n        });\n        game.invaderShots.push(projectile);\n      }\n\n    },\n    draw: function() {\n      if (this.active) screen.drawImage(invaderCanvas, this.coordinates.x, this.coordinates.y);\n\n    },\n    move: function() {\n      if (this.patrolX < 0 || this.patrolX > 100) {\n        this.speedX = -this.speedX;\n        this.patrolX += this.speedX;\n        this.coordinates.y += this.size.height;\n\n        if (this.coordinates.y + this.size.height * 2 > gameSize.height) game.lost = true;\n\n      } else {\n        this.coordinates.x += this.speedX;\n        this.patrolX += this.speedX;\n      }\n\n    },\n    destroy: function() {\n      this.active = false;\n      kills += 1;\n\n    }\n\n  };\n\n  // Player\n  // ------\n  var Player = function() {\n    this.active = true;\n    this.size = {\n      width: 16,\n      height: 8\n    };\n    this.shooterHeat = -3;\n    this.coordinates = {\n      x: gameSize.width / 2 - (this.size.width / 2) | 0,\n      y: gameSize.height - this.size.height * 2\n    };\n\n    this.projectile = [];\n    this.keyboarder = new KeyController();\n  };\n\n  Player.prototype = {\n    update: function() {\n\n      for (var i = 0; i < this.projectile.length; i++) this.projectile[i].update();\n\n      this.projectile = this.projectile.filter(function(projectile) {\n        return projectile.active;\n      });\n\n      if (!this.active) return;\n\n      if (this.keyboarder.isDown(this.keyboarder.KEYS.LEFT) && this.coordinates.x > 0) this.coordinates.x -= 2;\n      else if (this.keyboarder.isDown(this.keyboarder.KEYS.RIGHT) && this.coordinates.x < gameSize.width - this.size.width) this.coordinates.x += 2;\n\n      if (this.keyboarder.isDown(this.keyboarder.KEYS.Space)) {\n        this.shooterHeat += 1;\n        if (this.shooterHeat < 0) {\n          var projectile = new Projectile({\n            x: this.coordinates.x + this.size.width / 2 - 1,\n            y: this.coordinates.y - 1\n          }, {\n            x: 0,\n            y: -7\n          });\n          this.projectile.push(projectile);\n        } else if (this.shooterHeat > 12) this.shooterHeat = -3;\n      } else {\n        this.shooterHeat = -3;\n      }\n\n    },\n    draw: function() {\n      if (this.active) {\n        screen.rect(this.coordinates.x, this.coordinates.y, this.size.width, this.size.height);\n        screen.rect(this.coordinates.x - 2, this.coordinates.y + 2, 20, 6);\n        screen.rect(this.coordinates.x + 6, this.coordinates.y - 4, 4, 4);\n      }\n\n      for (var i = 0; i < this.projectile.length; i++) this.projectile[i].draw();\n\n    },\n    destroy: function() {\n      this.active = false;\n      game.lost = true;\n    }\n  };\n\n  // Projectile\n  // ------\n  var Projectile = function(coordinates, velocity) {\n    this.active = true;\n    this.coordinates = coordinates;\n    this.size = {\n      width: 3,\n      height: 3\n    };\n    this.velocity = velocity;\n  };\n\n  Projectile.prototype = {\n    update: function() {\n      this.coordinates.x += this.velocity.x;\n      this.coordinates.y += this.velocity.y;\n\n      if (this.coordinates.y > gameSize.height || this.coordinates.y < 0) this.active = false;\n\n    },\n    draw: function() {\n      if (this.active) screen.rect(this.coordinates.x, this.coordinates.y, this.size.width, this.size.height);\n\n    }\n  };\n\n  // Keyboard input tracking\n  // -----------------------\n  var KeyController = function() {\n    this.KEYS = {\n      LEFT: 37,\n      RIGHT: 39,\n      Space: 32\n    };\n    var keyCode = [37, 39, 32];\n    var keyState = {};\n\n    var counter;\n    window.addEventListener('keydown', function(e) {\n      for (counter = 0; counter < keyCode.length; counter++)\n        if (keyCode[counter] == e.keyCode) {\n          keyState[e.keyCode] = true;\n          e.preventDefault();\n        }\n\n    });\n\n    window.addEventListener('keyup', function(e) {\n      for (counter = 0; counter < keyCode.length; counter++)\n        if (keyCode[counter] == e.keyCode) {\n          keyState[e.keyCode] = false;\n          e.preventDefault();\n        }\n    });\n\n    this.isDown = function(keyCode) {\n      return keyState[keyCode] === true;\n    };\n\n  };\n\n  // Other functions\n  // ---------------\n  function collides(a, b) {\n    return a.coordinates.x < b.coordinates.x + b.size.width &&\n      a.coordinates.x + a.size.width > b.coordinates.x &&\n      a.coordinates.y < b.coordinates.y + b.size.height &&\n      a.coordinates.y + a.size.height > b.coordinates.y;\n  }\n\n  function getPixelRow(rowRaw) {\n    var textRow = [],\n      placer = 0,\n      row = Math.floor(rowRaw / invaderMultiplier);\n    if (row >= blocks.length) return [];\n    for (var i = 0; i < blocks[row].length; i++) {\n      var tmpContent = blocks[row][i] * invaderMultiplier;\n      for (var j = 0; j < invaderMultiplier; j++) textRow[placer + j] = tmpContent + j;\n      placer += invaderMultiplier;\n    }\n    return textRow;\n  }\n\n  // Write Text\n  // -----------\n  function createInvaders() {\n    var invaders = [];\n\n    var i = blocks.length * invaderMultiplier;\n    while (i--) {\n      var j = getPixelRow(i);\n      for (var k = 0; k < j.length; k++) {\n        invaders.push(new Invader({\n          x: j[k] * invaderSize,\n          y: i * invaderSize\n        }));\n      }\n    }\n    return invaders;\n  }\n\n  // Start game\n  // ----------\n  window.addEventListener('load', function() {\n\n    var invaderAsset = new Image;\n    invaderAsset.onload = function() {\n\n      invaderCanvas = document.createElement('canvas');\n      invaderCanvas.width = invaderSize;\n      invaderCanvas.height = invaderSize;\n      invaderCanvas.getContext(\"2d\").drawImage(invaderAsset, 0, 0);\n\n      // Game Creation\n      canvas = document.getElementById(\"space-invaders\");\n      screen = canvas.getContext('2d');\n\n      initGameStart();\n      loop();\n\n    };\n    invaderAsset.src = \"//stillh.art/project/spaceInvaders/invader.gif\";\n\n  });\n\n  window.addEventListener('resize', function() {\n    initGameStart();\n  });\n  document.getElementById('restart').addEventListener('click', function() {\n    initGameStart();\n  });\n\n  function initGameStart() {\n    if (window.innerWidth > 1200) {\n      screen.canvas.width = 1200;\n      screen.canvas.height = 500;\n      gameSize = {\n        width: 1200,\n        height: 500\n      };\n      invaderMultiplier = 3;\n      initialOffsetInvader = 420;\n    } else if (window.innerWidth > 800) {\n      screen.canvas.width = 900;\n      screen.canvas.height = 600;\n      gameSize = {\n        width: 900,\n        height: 600\n      };\n      invaderMultiplier = 2;\n      initialOffsetInvader = 280;\n    } else {\n      screen.canvas.width = 600;\n      screen.canvas.height = 300;\n      gameSize = {\n        width: 600,\n        height: 300\n      };\n      invaderMultiplier = 1;\n      initialOffsetInvader = 140;\n    }\n\n    kills = 0;\n    invaderAttackRate = 0.999;\n    invaderSpeed = 20;\n    spawnDelayCounter = invaderSpawnDelay;\n\n    game = new Game();\n  }\n\n  function loop() {\n    game.update();\n    game.draw();\n\n    requestAnimationFrame(loop);\n  }\n\n})();\n"]}